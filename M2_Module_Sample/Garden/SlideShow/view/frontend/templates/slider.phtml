<?php
/**
 * Copyright Â© The Garden Health & Beauty Store, Inc All rights reserved.
 * See COPYING.txt for license details.
 */
?>
<?php
/**
 * Home Page Slider
 *
 * @var $block Garden\SlideShow\Block\CmsPage
 * @var \Magento\Framework\Escaper $escaper
 */
?>
<?php $sliderData = $block->getSliderData(); ?>
<?php if ($sliderData->getSize()): ?>
<div id="contentslider">
    <div class="flexslider">
        <ul class="slides">
<?php foreach ($sliderData as $slider) : ?>
    <?php $imageName = $slider->getFldImage(); ?>
    <?php if ($block->IsImageExits($imageName)) : ?>
        <?php $urlLink = (!empty($slider->getUrlLink())) ? $slider->getUrlLink() : ''; ?>
        <?php if ($urlLink) : ?>
            <?php $description = (!empty($slider->getFldDescription())) ? $slider->getFldDescription() : 'Total Health and Beauty at Beauty Bargains Ltd. Next Day Delivery. Free Giftwrapping.  Shop with confidence with the leaders in online Health and Beauty since 1993'; ?>
            <li>
                <a href="<?= $escaper->escapeUrl($slider->getStoreUrlLink() . $urlLink) ?>" title="<?= $escaper->escapeHtml($slider->getTitle()) ?>">
                    <img src="<?= $escaper->escapeHtml($block->getFullImagePath($imageName)); ?>"
                                                                  alt="<?= $escaper->escapeHtml($slider->getTitle()) ?>"/>
                                                                </a>
            </li>
        <?php else : ?>
            <li><img src="<?= $escaper->escapeHtml($block->getFullImagePath($imageName)); ?>"
                                                                  alt="<?= $escaper->escapeHtml($slider->getTitle()) ?>"/>

            </li>
        <?php endif; ?>
    <?php endif; ?>
<?php endforeach; ?>
        </ul>
    </div>
    <script type="text/javascript">
    require([
        'jquery',
        'flexsliderjs'
    ], function($){
        $('.flexslider').flexslider({
                namespace: "flex-", //{NEW} String: Prefix string attached to the class of every element generated by the plugin
                selector: ".slides > li", //{NEW} Selector: Must match a simple pattern. '{container} > {slide}' -- Ignore pattern at your own peril
                animation: "slide", //String: Select your animation type, "fade" or "slide"
                easing: "swing", //{NEW} String: Determines the easing method used in jQuery transitions. jQuery easing plugin is supported!
                controlNav: false,
                directionNav: true,
                nextText: "<img src='<?= $escaper->escapeUrl( $block->getViewFileUrl('Garden_SlideShow::images/ArrowRight.png')); ?>'>",
                prevText: "<img src='<?= $escaper->escapeUrl($block->getViewFileUrl('Garden_SlideShow::images/ArrowLeft.png')); ?>'>",
            });
    });
    </script>
</div>
<?php endif; ?>
